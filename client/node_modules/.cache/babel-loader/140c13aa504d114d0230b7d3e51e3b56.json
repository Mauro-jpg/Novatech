{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Mailer = void 0;\n\nvar nodemailer_1 = require(\"nodemailer\");\n\nvar server_1 = require(\"react-dom/server\");\n\nvar renderBody = function renderBody(body) {\n  return \"<!DOCTYPE html>\".concat((0, server_1.renderToStaticMarkup)(body));\n};\n\nvar createTransporter = function createTransporter(_ref) {\n  var transport = _ref.transport,\n      defaults = _ref.defaults;\n\n  if ('sendMail' in transport) {\n    return transport;\n  }\n\n  return (0, nodemailer_1.createTransport)(transport, defaults);\n};\n\nvar Mailer = function Mailer(config, emails) {\n  var transporter = createTransporter(config);\n  /**\n   * Use the `send` method to send your emails\n   *\n   * @param {string} template Your email template name: key of the email in the record you've provided.\n   * @param {Object} props The props of your email component\n   * @param {Object} options The options of email (to, from, attachments, etc.)\n   * @return Promise\n   */\n\n  var sendEmail = function sendEmail(template, props, options) {\n    var _emails$template = emails[template](props),\n        subject = _emails$template.subject,\n        body = _emails$template.body;\n\n    return transporter.sendMail(Object.assign({\n      subject: subject,\n      html: renderBody(body)\n    }, options));\n  };\n\n  return {\n    send: sendEmail\n  };\n};\n\nexports.Mailer = Mailer;\nexports.default = exports.Mailer;","map":null,"metadata":{},"sourceType":"script"}